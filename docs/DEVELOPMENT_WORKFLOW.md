# 開発ワークフロー

## 概要
Radio-Calisthenicsプロジェクトの開発段階別ワークフローと品質管理基準について説明します。

## 開発段階別ワークフロー

### プロジェクト開始時チェックリスト
```bash
# 1. 技術スタック検証
gemini -p "Rails 8 + PostgreSQL + Bootstrap 5.2の組み合わせで初学者向けラジオ体操スタンプカードアプリ。技術的な注意点は？"

# 2. 開発環境確認
gemini -p "Docker + Rails 8の開発環境構築で一般的な落とし穴は？"

# 3. プロジェクト構成レビュー
gemini -p "MVCパターンを重視した初学者向けRailsプロジェクトの理想的なディレクトリ構造は？"
```

### 機能実装段階

#### Phase 1: 要件分析・設計
```bash
# 要件の妥当性確認
gemini -p "ラジオ体操スタンプカードシステムで必須機能とあると良い機能を教えて"

# データベース設計検証
gemini -p "User, StampCard, DailyStampモデルの関連設計。初学者が理解しやすい設計パターンは？"

# アーキテクチャ検討
gemini -p "Rails 8でのMVCパターン実装。初学者が混乱しやすいポイントは？"
```

#### Phase 2: 実装
```bash
# 実装前検証
gemini -p "rails generate model StampCard user:references date:date stamped_at:datetime このコマンドで生成されるファイルと注意点は？"

# コード品質確認
gemini -p "以下のStampCardモデルのコードレビューをお願いします [コード内容]"

# テスト戦略相談
gemini -p "StampCardモデルに対するRSpecのテストケース。何をテストすべき？"
```

#### Phase 3: 統合・デバッグ
```bash
# エラー解決
gemini -p "NoMethodError in StampCardsController#create 'date' for nil:NilClass の原因と解決法は？"

# パフォーマンス確認
gemini -p "N+1クエリ問題の発見方法とRailsでの解決パターンは？"

# セキュリティ確認
gemini -p "Railsのmass assignment対策。Strong Parametersの実装で注意すべき点は？"
```

## 緊急時対応ガイド

### システムダウン時
1. **状況把握**: `gemini -p "Rails production環境でアプリが500エラー。チェックすべき箇所は？"`
2. **ログ分析**: `gemini -p "以下のRailsログの分析をお願いします [ログ内容]"`
3. **復旧方針**: `gemini -p "データベース接続エラーの一般的な復旧手順は？"`

### 開発環境トラブル時
1. **Docker関連**: `gemini -p "docker-compose up でRails起動失敗。よくある原因と対処法は？"`
2. **Gem依存関係**: `gemini -p "bundle install でConflictエラー。解決手順は？"`
3. **データベース関連**: `gemini -p "rails db:migrate で PG::Error発生。対処法は？"`

## 開発方針

### 初学者向けのシンプル設計
- MVCパターンの基本を重視
- 複雑な設計パターンよりも理解しやすさを優先
- 段階的な機能追加により学習効果を最大化
- 明確なコメントと分かりやすい変数名を使用

### セキュリティ
- DeviseによるSecure By Default認証
- Strong Parametersの徹底
- CSRFトークンの適切な使用
- SQLインジェクション対策

### テスト戦略
- RSpecによる基本的なテストカバレッジ
- Factory Botを使った効率的なテストデータ作成
- 重要な機能における統合テストの実装

## ビルド・テストコマンド

### 開発環境起動
```bash
docker-compose up
```

### テスト実行
```bash
bundle exec rspec
```

### Lint・コード品質チェック
```bash
bundle exec rubocop
```

### データベース操作
```bash
# マイグレーション実行
rails db:migrate

# シードデータ投入
rails db:seed
```

## 🔄 統一実装フロー

### 基本原則
**「既存の完全動作する機能を活用し、混乱要素を排除して実用性を向上させる」**

### 実装効率化のルール
1. **機能重複の排除**: 同様の機能が複数存在する場合は統合
2. **完成済み機能の活用**: 新規開発より既存改善を優先
3. **計画文書の整合性**: 競合する計画は統一・アーカイブ化
4. **ブランチ管理**: 重複・競合ブランチの定期的な整理

### 品質管理基準
- **コード品質**: RuboCop 100%準拠
- **テスト**: RSpec全通過
- **セキュリティ**: Strong Parameters・認証認可の適切な実装
- **UI/UX**: Bootstrap 5.2準拠・レスポンシブ対応

## 初学者向けAI活用ガイド

### よくある誤用パターンと対策

#### ❌ 誤用例1: AIに依存しすぎる
```bash
# 問題のある質問
gemini -p "ラジオ体操スタンプカードアプリを全部作って"
```
**問題点**: 学習効果が薄い、要件が不明確
**改善策**: 具体的な機能に分割して段階的に質問

#### ❌ 誤用例2: コードをそのままコピペ
```bash
# Geminiの回答をそのまま使用
# → 理解せずに実装、デバッグできない
```
**問題点**: 動作原理を理解していない
**改善策**: コードの説明を求め、行ごとに理解してから実装

#### ❌ 誤用例3: エラーメッセージを読まない
```bash
# 問題のある質問
gemini -p "エラーが出る。直して。"
```
**問題点**: エラーメッセージから学ぶ機会を逃す
**改善策**: エラーメッセージを読み、不明な部分のみ質問

### 段階的スキルアップガイド

#### レベル1: 基本的な質問（学習開始〜1ヶ月）
```bash
# 概念理解
gemini -p "Railsのルーティングとは？初心者向けに例を交えて説明して"

# 基本コマンド確認
gemini -p "rails generate model の基本的な使い方と生成されるファイルを教えて"

# エラー解決
gemini -p "以下のエラーメッセージの意味を教えて: [エラーメッセージ]"
```

#### レベル2: 実装相談（1〜3ヶ月）
```bash
# 設計相談
gemini -p "StampCardとUserの関連。has_many/belongs_toの設計で注意すべき点は？"

# コード改善
gemini -p "以下のコントローラーコードの改善点を初学者向けに説明して: [コード]"

# テスト相談
gemini -p "StampCardモデルの基本的なValidationテスト。RSpecでどう書く？"
```

#### レベル3: 設計・アーキテクチャ（3ヶ月〜）
```bash
# アーキテクチャ検討
gemini -p "スタンプ記録機能の設計。日付管理はどう実装すべき？"

# パフォーマンス相談
gemini -p "スタンプカード一覧表示でN+1クエリを防ぐ方法は？"

# セキュリティ確認
gemini -p "ユーザー認証実装でセキュリティ上注意すべき点は？"
```

### AI依存の回避方法

#### 自力解決を促進する習慣
1. **エラーメッセージを熟読**: まず自分で読み解く
2. **公式ドキュメント確認**: Rails Guidesを先に読む
3. **小さく分けて理解**: 大きな問題を細分化
4. **実際に手を動かす**: コードを実際に書いて確認

#### 効果的な学習サイクル
```
1. 自分で調べる（15分）
   ↓
2. Geminiで概念確認（5分）
   ↓
3. 実装・検証（30分）
   ↓
4. 問題点をGeminiで深掘り（10分）
   ↓
5. 再実装・テスト（20分）
```

#### 理解度チェックポイント
- **Why**: なぜこの実装が必要？
- **How**: どのような仕組みで動作？
- **What if**: 別の方法があるか？
- **Debug**: エラー時に自分で調査できるか？

### 推奨学習リソース
1. **Rails Guides**: 公式ドキュメント（必須）
2. **Railsチュートリアル**: 体系的学習
3. **GitHub**: 他の人のコードを読む
4. **Gemini**: 疑問点の解決・コードレビュー

## 学習目標
1. Rails MVCパターンの理解
2. RESTful APIの実装
3. 認証・認可の実装
4. データベース設計の基礎
5. テスト駆動開発の実践

## プロジェクト成長記録

### 技術的成果
- **Rails 8**: 最新フレームワークでの実装経験
- **AI連携**: Claude Code + Gemini CLI による効率的開発
- **画像処理**: ImageMagick統合による高度な画像生成
- **非同期処理**: Active Job による背景ジョブ実装
- **データ可視化**: Chart.js による統計グラフ実装

### 学習効果
- **MVCパターン**: Railsアーキテクチャの深い理解
- **セキュリティ**: 認証・認可・脆弱性対策の実践
- **UI/UX**: レスポンシブデザイン・アクセシビリティ配慮
- **プロジェクト管理**: Issue・PR・Git管理の体系化
- **自動化**: CI/CD・自動テスト・品質管理の実装

### 初学者向けポイント
- **段階的実装**: Phase分割による理解しやすい学習プロセス
- **実践的経験**: 実際のWebアプリケーション開発体験
- **品質意識**: テスト・リント・セキュリティの重要性体得
- **チーム開発**: Issue・PR・レビューによる協業体験