# Gemini CLI活用ガイド

## 概要
Radio-Calisthenicsプロジェクトにおけるgemini CLIの効果的な活用方法について説明します。

## Gemini CLI活用実例集

### よく使用するGeminiコマンドパターン

#### 基本的な質問
```bash
# 一般的な技術相談
gemini -p "Rails 8でのベストプラクティスを教えて"

# 具体的な実装相談
gemini -p "Railsでファイルアップロード機能を実装したい。おすすめのgemと実装方法は？"

# エラー解決
gemini -p "PG::ConnectionBad エラーが発生。Docker環境での対処法は？"
```

#### コードレビュー依頼
```bash
# ファイル全体をレビュー
gemini -p "以下のRailsコントローラーのコードレビューをお願いします:
$(cat app/controllers/stamp_cards_controller.rb)"

# 特定部分のレビュー
gemini -p "以下のValidation設定に問題はないですか？
validates :date, presence: true, uniqueness: { scope: :user_id }
validates :stamped_at, presence: true"
```

#### 設計・アーキテクチャ相談
```bash
# データベース設計確認
gemini -p "User、StampCard、DailyStampテーブルの関連設計を確認してください:
$(cat db/schema.rb)"

# ルーティング設計確認
gemini -p "以下のルーティング設計に改善点はありますか？
$(cat config/routes.rb)"
```

#### テスト戦略相談
```bash
# テストケース提案
gemini -p "以下のStampCardモデルに対して、どのようなRSpecテストケースが必要ですか？
$(cat app/models/stamp_card.rb)"

# テストコードレビュー
gemini -p "以下のRSpecテストコードの改善点を教えてください:
$(cat spec/models/stamp_card_spec.rb)"
```

#### パフォーマンス・セキュリティ確認
```bash
# パフォーマンス分析
gemini -p "以下のクエリでN+1問題は発生しますか？対策も教えてください:
User.includes(:stamp_cards).where(active: true)"

# セキュリティ確認
gemini -p "以下のStrong Parametersにセキュリティ上の問題はありますか？
params.require(:stamp_card).permit(:user_id, :date, :stamped_at, :location)"
```

### レスポンス解釈ガイドライン

#### Geminiの回答を活用する際の注意点
1. **複数の視点で検証**: 同じ質問を異なる角度から複数回質問
2. **実装前の再確認**: Geminiの提案を実装する前に、プロジェクト要件と照らし合わせ
3. **バージョン確認**: Rails/Gemのバージョン情報を含めて質問
4. **エラー情報は具体的に**: スタックトレース全体を含めて質問

#### 効果的な質問の仕方
```bash
# ❌ 曖昧な質問
gemini -p "Railsでユーザー認証を実装したい"

# ✅ 具体的な質問  
gemini -p "Rails 8 + Devise + Bootstrap 5.2でユーザー認証。初学者向けの実装手順と注意点は？Docker環境使用。"

# ❌ 情報不足
gemini -p "エラーが出る"

# ✅ 詳細情報付き
gemini -p "docker-compose up時に以下のエラーが発生。原因と解決法は？
Error: Bundler::GemNotFound: Could not find gem 'bootstrap'"
```

## 初学者向けAI活用ガイド

### よくある誤用パターンと対策

#### ❌ 誤用例1: AIに依存しすぎる
```bash
# 問題のある質問
gemini -p "ラジオ体操スタンプカードアプリを全部作って"
```
**問題点**: 学習効果が薄い、要件が不明確
**改善策**: 具体的な機能に分割して段階的に質問

#### ❌ 誤用例2: コードをそのままコピペ
```bash
# Geminiの回答をそのまま使用
# → 理解せずに実装、デバッグできない
```
**問題点**: 動作原理を理解していない
**改善策**: コードの説明を求め、行ごとに理解してから実装

#### ❌ 誤用例3: エラーメッセージを読まない
```bash
# 問題のある質問
gemini -p "エラーが出る。直して。"
```
**問題点**: エラーメッセージから学ぶ機会を逃す
**改善策**: エラーメッセージを読み、不明な部分のみ質問

### 段階的スキルアップガイド

#### レベル1: 基本的な質問（学習開始〜1ヶ月）
```bash
# 概念理解
gemini -p "Railsのルーティングとは？初心者向けに例を交えて説明して"

# 基本コマンド確認
gemini -p "rails generate model の基本的な使い方と生成されるファイルを教えて"

# エラー解決
gemini -p "以下のエラーメッセージの意味を教えて: [エラーメッセージ]"
```

#### レベル2: 実装相談（1〜3ヶ月）
```bash
# 設計相談
gemini -p "StampCardとUserの関連。has_many/belongs_toの設計で注意すべき点は？"

# コード改善
gemini -p "以下のコントローラーコードの改善点を初学者向けに説明して: [コード]"

# テスト相談
gemini -p "StampCardモデルの基本的なValidationテスト。RSpecでどう書く？"
```

#### レベル3: 設計・アーキテクチャ（3ヶ月〜）
```bash
# アーキテクチャ検討
gemini -p "スタンプ記録機能の設計。日付管理はどう実装すべき？"

# パフォーマンス相談
gemini -p "スタンプカード一覧表示でN+1クエリを防ぐ方法は？"

# セキュリティ確認
gemini -p "ユーザー認証実装でセキュリティ上注意すべき点は？"
```

### AI依存の回避方法

#### 自力解決を促進する習慣
1. **エラーメッセージを熟読**: まず自分で読み解く
2. **公式ドキュメント確認**: Rails Guidesを先に読む
3. **小さく分けて理解**: 大きな問題を細分化
4. **実際に手を動かす**: コードを実際に書いて確認

#### 効果的な学習サイクル
```
1. 自分で調べる（15分）
   ↓
2. Geminiで概念確認（5分）
   ↓
3. 実装・検証（30分）
   ↓
4. 問題点をGeminiで深掘り（10分）
   ↓
5. 再実装・テスト（20分）
```

#### 理解度チェックポイント
- **Why**: なぜこの実装が必要？
- **How**: どのような仕組みで動作？
- **What if**: 別の方法があるか？
- **Debug**: エラー時に自分で調査できるか？

### 推奨学習リソース
1. **Rails Guides**: 公式ドキュメント（必須）
2. **Railsチュートリアル**: 体系的学習
3. **GitHub**: 他の人のコードを読む
4. **Gemini**: 疑問点の解決・コードレビュー

## AI連携の制限事項・注意点

### セキュリティ・プライバシー考慮事項

#### 🚨 機密情報の取り扱い
```bash
# ❌ 絶対に送信してはいけない情報
- API キー、パスワード、秘密鍵
- 個人情報（メールアドレス、電話番号等）
- 本番環境の設定情報
- データベースの実際のデータ

# ✅ 安全な情報共有例
gemini -p "Rails認証の実装方法（コードサンプルは仮の内容で）"
gemini -p "以下のgemfileの依存関係チェック（個人情報削除済み）"
```

#### 🔐 コード共有時の注意点
1. **機密情報マスク**: APIキー等は `[API_KEY]` で置換
2. **サンプルデータ使用**: 実際のユーザーデータは使わない
3. **環境分離**: 本番設定は絶対に共有しない
4. **ログの注意**: エラーログも個人情報が含まれる可能性

### AI技術の制限事項

#### Gemini CLIの制限
1. **リアルタイム情報**: 最新のGem情報等は古い場合がある
2. **プロジェクト固有情報**: あなたの環境固有の問題は解決困難
3. **複雑な設計判断**: ビジネス要件を理解した判断は不可能
4. **コード実行環境**: ローカル環境でのテストは不可

#### Claude Codeの制限
1. **外部API呼び出し**: WebSearchは禁止（Geminiで代替）
2. **ファイルサイズ**: 大きなファイルの一括処理は困難
3. **デバッグ実行**: ブレークポイント等の対話的デバッグ不可
4. **GUI操作**: ブラウザ操作等は不可

### パフォーマンス最適化のコツ

#### 効率的なGemini活用
```bash
# ✅ 一度に複数の関連質問
gemini -p "Rails StampCardモデルについて以下を教えて:
1. 基本的なValidation設定
2. User との関連付け方法
3. 初学者が陥りやすいミス"

# ❌ 連続した単発質問（API使用量が多い）
gemini -p "StampCardモデルのvalidationは？"
gemini -p "StampCardとUserの関連は？"
gemini -p "よくあるミスは？"
```

#### Claude Code最適化
1. **ファイル分割**: 大きなファイルは小さく分けて処理
2. **段階的実装**: 一度に全て実装せず、段階的に進める
3. **定期的な中間確認**: 各段階でGeminiによる検証実施
4. **エラー早期発見**: 小さい単位でテスト実行

### 緊急時対応フロー

#### システム障害時
1. **Gemini確認**: `gemini -p "Rails production 500エラーの一般的原因と調査手順"`
2. **ログ分析**: エラーログを（機密情報除去して）Geminiで分析
3. **Claude実装**: Geminiのアドバイスを基にClaude Codeで修正
4. **検証**: 修正後、再度Geminiで検証

#### 開発ブロック時
1. **問題分析**: Geminiで技術的選択肢を確認
2. **実装方針決定**: ユーザーが最終判断
3. **Claude実装**: 決定した方針でClaude Codeが実装
4. **品質確認**: Geminiでコードレビュー

### ベストプラクティスまとめ

#### 三位一体開発の原則再確認
- **ユーザー**: 要件定義・最終判断・ビジネス観点
- **Claude**: 実装・リファクタリング・タスク管理
- **Gemini**: 技術検証・コードレビュー・最新情報

#### 成功する開発フロー
1. **計画**: Geminiで技術調査 → ユーザー判断
2. **実装**: Claudeで段階的実装
3. **検証**: Geminiでレビュー → Claude修正
4. **完成**: ユーザー確認 → 次の機能へ

このフローを守ることで、セキュアかつ効率的な開発が実現できます。